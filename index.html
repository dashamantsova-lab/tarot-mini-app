<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>–¢–∞—Ä–æ ‚Äî –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>

  <style>
    :root{
      --bg1:#2b1670;
      --bg2:#0b0f2b;
      --text:#ffffff;
      --muted: rgba(255,255,255,.72);
      --btn:#f2c44c;
      --btnText:#151515;
      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --radius: 18px;
      --glow: 0 0 0 1px rgba(255,255,255,.10), 0 18px 38px rgba(0,0,0,.38), 0 0 26px rgba(242,196,76,.16);
      --glowStrong: 0 0 0 1px rgba(255,255,255,.14), 0 22px 48px rgba(0,0,0,.44), 0 0 38px rgba(242,196,76,.28);
    }

    *{ box-sizing:border-box; }
    html,body{ 
      height:100%; 
      margin:0;
      padding:0;
      overflow:hidden; /* –í–∞–∂–Ω–æ –¥–ª—è Telegram Mini Apps */
    }

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(280px 280px at 50% 35%, rgba(255,255,255,.12), transparent 60%),
        radial-gradient(420px 420px at 50% 55%, rgba(0,0,0,.35), transparent 65%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    .app{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      padding: 14px 14px 18px;
      gap: 12px;
      position: relative;
    }

    .screen{
      width:100%;
      max-width: 420px;
      flex:1;
      display:none;
      position:relative;
      padding: 0;
      z-index: 2;
      min-height: 0; /* –í–∞–∂–Ω–æ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ */
    }
    /* –î–µ–ª–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Ñ–ª–µ–∫—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º */
    .screen.active{ 
      display: flex; 
      flex-direction: column;
    }

    /* ===== Intro overlay ===== */
    .introOverlay{
      position:absolute;
      inset:0;
      z-index: 5;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 20px;
      background:
        radial-gradient(340px 340px at 50% 40%, rgba(255,255,255,.10), transparent 65%),
        radial-gradient(520px 520px at 50% 65%, rgba(0,0,0,.30), transparent 70%),
        linear-gradient(180deg, #3a1b8a, #0b0f2b);
      opacity: 0;
      pointer-events:none;
      transition: opacity 450ms ease;
      overflow:hidden;
    }
    .introOverlay.show{
      opacity: 1;
      pointer-events:auto;
    }
    .introText{
      max-width: 360px;
      text-align:center;
      font-weight: 800;
      font-size: 18px;
      line-height: 1.35;
      letter-spacing:.2px;
      text-shadow: 0 18px 40px rgba(0,0,0,.35);
    }
    .introText small{
      display:block;
      margin-top: 10px;
      font-weight: 600;
      font-size: 13px;
      color: rgba(255,255,255,.78);
    }

    .stars{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity: .95;
    }
    .star{
      position:absolute;
      width: 3px;
      height: 3px;
      border-radius: 999px;
      background: rgba(255,255,255,.95);
      box-shadow: 0 0 12px rgba(255,255,255,.45);
      animation: twinkle var(--tw, 1800ms) ease-in-out infinite;
    }
    .star.big{
      width: 5px; height: 5px;
      box-shadow: 0 0 18px rgba(255,255,255,.55);
    }
    @keyframes twinkle{
      0%, 100% { opacity: .15; transform: scale(.7); }
      50%      { opacity: 1; transform: scale(1.2); }
    }

    /* ===== Wheel screen ===== */
    .wheelWrap{
      height: 100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 18px;
    }

    .wheel{
      position:relative;
      width: 320px;
      height: 320px;
      max-width: 92vw;
      max-height: 92vw;
      border-radius: 999px;
      display:block;
      filter: drop-shadow(0 24px 40px rgba(0,0,0,.35));
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 450ms ease, transform 450ms ease;
    }
    .wheel.ready{
      opacity: 1;
      transform: translateY(0);
    }

    .hint{
      text-align:center;
      color: rgba(255,255,255,.86);
      font-size: 14px;
      line-height: 1.35;
      margin-top: 10px;
    }

    .tarotCard{
      position:absolute;
      width: 92px;
      height: 142px;
      border-radius: 14px;
      cursor:pointer;
      user-select:none;
      transition: filter 200ms ease, opacity 200ms ease;
      will-change: transform;
    }

    .cardFace{
      width:100%;
      height:100%;
      border-radius:14px;
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 14px 30px rgba(0,0,0,.35), 0 0 20px rgba(255,255,255,.08);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      overflow:hidden;
      position:relative;
    }
    .tarotCard .cardFace::after{
      content:"";
      position:absolute;
      inset:-10px;
      background: radial-gradient(80px 80px at 50% 30%, rgba(242,196,76,.16), transparent 60%);
      opacity: .75;
      pointer-events:none;
    }

    .pickedOut{
      opacity: 0.14;
      filter: blur(0.7px);
      pointer-events:none;
    }

    /* ===== Picked screen ===== */
    .pickedWrap{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 16px;
    }

    .pill{
      width:100%;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      padding: 10px 14px;
      text-align:center;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }
    .pillSmall{
      font-size: 12px;
      letter-spacing:.5px;
      color: var(--muted);
      text-transform: uppercase;
      margin-bottom: 2px;
    }
    .pillBig{
      font-size: 18px;
      font-weight: 800;
    }

    .pickedFlip{
      width: 175px;
      height: 268px;
      perspective: 1100px;
      filter: drop-shadow(0 28px 60px rgba(0,0,0,.42));
    }
    .pickedInner{
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 760ms cubic-bezier(.2,.9,.2,1);
      border-radius: 18px;
      box-shadow: var(--glowStrong);
    }
    .pickedFlip.revealed .pickedInner{
      transform: rotateY(180deg);
    }
    .pickedFace{
      position:absolute;
      inset:0;
      border-radius: 18px;
      overflow:hidden;
      backface-visibility: hidden;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
    }
    .pickedBack{
      background-size: cover;
      background-position: center;
    }
    .pickedFront{
      transform: rotateY(180deg);
    }
    .pickedFront img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .btnPrimary{
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 14px 16px;
      font-weight: 900;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      background: var(--btn);
      color: var(--btnText);
      box-shadow: 0 18px 40px rgba(242,196,76,.22), 0 10px 20px rgba(0,0,0,.28);
      cursor:pointer;
    }

    /* ===== –¢–ï–ö–°–¢–û–í–´–ô –≠–ö–†–ê–ù (–§–ò–ö–°) ===== */
    .textWrap{
      height:100%;
      display:flex;
      flex-direction:column;
      overflow: hidden; /* –ß—Ç–æ–±—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –±—ã–ª–∞ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø–∞–Ω–µ–ª–∏ */
    }

    .heading{
      flex-shrink: 0;
      padding: 4px 2px 12px;
    }
    .headingSmall{
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: .6px;
      font-size: 12px;
      margin-bottom: 4px;
    }
    .headingBig{
      font-size: 22px;
      font-weight: 900;
      margin: 0;
    }

    .textPanel{
      flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ */
      min-height: 0; 
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      padding: 16px;
      overflow-y: auto; /* –í–∫–ª—é—á–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –∑–¥–µ—Å—å */
      color: rgba(255,255,255,.92);
      line-height: 1.55;
      font-size: 15px;
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,.25) transparent;
      white-space: pre-line;
      overscroll-behavior: contain;
      -webkit-overflow-scrolling: touch;
    }

    .bottomBtns{
      flex-shrink: 0;
      display:flex;
      flex-direction:column;
      gap: 10px;
      padding: 16px 0 4px;
      background: linear-gradient(180deg, rgba(11,15,43,0) 0%, rgba(11,15,43,.9) 25%);
    }

    .btnSecondary{
      width:100%;
      border-radius: 14px;
      padding: 14px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.94);
      font-weight: 800;
      cursor:pointer;
      box-shadow: var(--glow);
    }

    .btnGhost{
      width:100%;
      border-radius: 14px;
      padding: 14px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.90);
      font-weight: 800;
      cursor:pointer;
      box-shadow: var(--glow);
    }

    @media (max-width: 360px){
      .wheel{ width: 285px; height: 285px; }
      .tarotCard{ width: 86px; height: 134px; }
      .pickedFlip{ width: 160px; height: 246px; }
      .textPanel { font-size: 14px; }
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="introOverlay show" id="intro">
      <div class="stars" id="stars"></div>
      <div class="introText">
        –ó–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞ –∏ —Å—Ñ–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –≤–∞—à–µ–º –∑–∞–ø—Ä–æ—Å–µ‚Ä¶
        <small>–°–µ–π—á–∞—Å –ø–æ—è–≤—è—Ç—Å—è –∫–∞—Ä—Ç—ã</small>
      </div>
    </div>

    <section class="screen active" id="screenWheel">
      <div class="wheelWrap">
        <div class="wheel" id="wheel"></div>
        <div class="hint">–í—ã–±–µ—Ä–∏—Ç–µ 1 –∫–∞—Ä—Ç—É</div>
      </div>
    </section>

    <section class="screen" id="screenPicked">
      <div class="pickedWrap">
        <div class="pill">
          <div class="pillSmall" id="pillSphere">–°–§–ï–†–ê: –õ–ò–ß–ù–û–°–¢–ù–´–ô –†–û–°–¢</div>
          <div class="pillBig" id="pillName">–î—å—è–≤–æ–ª</div>
        </div>

        <div class="pickedFlip" id="pickedFlip">
          <div class="pickedInner">
            <div class="pickedFace pickedBack" id="pickedBack"></div>
            <div class="pickedFace pickedFront">
              <img id="pickedFrontImg" alt="–ö–∞—Ä—Ç–∞" />
            </div>
          </div>
        </div>

        <button class="btnPrimary" id="btnDecode">–ü–û–õ–£–ß–ò–¢–¨ –†–ê–°–®–ò–§–†–û–í–ö–£</button>
      </div>
    </section>

    <section class="screen" id="screenText">
      <div class="textWrap">
        <div class="heading">
          <div class="headingSmall" id="textSphere">–°–§–ï–†–ê: –õ–ò–ß–ù–û–°–¢–ù–´–ô –†–û–°–¢</div>
          <h2 class="headingBig" id="textName">–î—å—è–≤–æ–ª</h2>
        </div>

        <div class="textPanel" id="textPanel"></div>

        <div class="bottomBtns">
          <button class="btnSecondary" id="btnSend">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç</button>
          <button class="btnGhost" id="btnFull">–•–æ—á—É –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥!</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    const BACK_IMAGE = "assets/back.jpg";
    const FULL_READING_LINK = ""; 

    const TAROT = [
      {
        name: "–î—å—è–≤–æ–ª",
        sphere: "–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç",
        image: "assets/devil.jpg",
        long:
`2026 –≥–æ–¥ –Ω–µ —Å—Ç–∞–Ω–µ—Ç –¥–ª—è —Ç–≤–æ–µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –º–∏—Ä–∞ ¬´–ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç—å¬ª. –û–Ω —Å—Ç–∞–Ω–µ—Ç —Ç–æ—á–∫–æ–π —á–µ—Å—Ç–Ω–æ—Å—Ç–∏.
–ö–∞—Ä—Ç–∞ –î—å—è–≤–æ–ª ‚Äî —ç—Ç–æ –Ω–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ –∏ –Ω–µ ¬´–ø–ª–æ—Ö–æ–π –∑–Ω–∞–∫¬ª. –≠—Ç–æ –ø—Ä–∏–≥–æ–≤–æ—Ä –∏–ª–ª—é–∑–∏—è–º, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—ã –ø—Ä—è—Ç–∞–ª–∞ —Å–≤–æ—é —Å–∏–ª—É.

–í —ç—Ç–æ–º –≥–æ–¥—É –≤—Å—ë, —á—Ç–æ –¥–µ—Ä–∂–∞–ª–æ—Å—å –Ω–∞ —Å—Ç—Ä–∞—Ö–µ, —Å—Ç—ã–¥–µ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á—É–∂–æ–π –æ—Ü–µ–Ω–∫–∏ –∏–ª–∏ –Ω–∞ –ø—Ä–∏–≤—ã—á–∫–µ ¬´—Ç–µ—Ä–ø–µ—Ç—å¬ª, –Ω–∞—á–Ω—ë—Ç —Ä–∞—Å—Å—ã–ø–∞—Ç—å—Å—è.
–¢—ã —É–≤–∏–¥–∏—à—å, –≥–¥–µ —Ç–µ–±—è –¥–µ—Ä–∂–∞—Ç –∫—Ä—é—á–∫–∏: –ø—Ä–∏–≤—ã—á–∫–∏, –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∂—É—Ç—Å—è ¬´–Ω–æ—Ä–º–æ–π¬ª, –Ω–æ –Ω–∞ –¥–µ–ª–µ –æ–±–Ω—É–ª—è—é—Ç —Ç–≤–æ—é —ç–Ω–µ—Ä–≥–∏—é.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —Å —Ç–µ–º, —á—Ç–æ —Ç–µ–±—è —Ä–∞–∑—Ä—É—à–∞–µ—Ç.
–ü—Ä–∏–∑–Ω–∞—Ç—å: ¬´–¥–∞, —è —ç—Ç–æ –≤—ã–±–∏—Ä–∞–∞–ª–∞¬ª ‚Äî –∏ –≤–ø–µ—Ä–≤—ã–µ –≤—ã–±—Ä–∞—Ç—å –∏–Ω–∞—á–µ.
–û—Å–≤–æ–±–æ–¥–∏–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ —Å—Ç–∞–Ω–µ—Ç –æ—Å–Ω–æ–≤–æ–π –Ω–æ–≤–æ–π –∂–∏–∑–Ω–∏, –≥–¥–µ —Ç—ã —É–ø—Ä–∞–≤–ª—è–µ—à—å –≤–Ω–∏–º–∞–Ω–∏–µ–º, –∂–µ–ª–∞–Ω–∏—è–º–∏ –∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏.

–ì–æ—Ç–æ–≤(–∞) —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –¥–µ—Ä–∂–∏—Ç —Ç–µ–±—è –≤ –ø–µ—Ç–ª–µ –∏ –∫–∞–∫ –≤—ã–π—Ç–∏?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–∫—É —Ä–∞–∑—Ä—ã–≤–∞ –∏ —Ç–æ—á–Ω—ã–µ —à–∞–≥–∏, —á—Ç–æ –º–µ–Ω—è—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å.`
      },
      {
        name: "–°–æ–ª–Ω—Ü–µ",
        sphere: "–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç",
        image: "assets/sun.jpg",
        long:
`2026 –≥–æ–¥ –Ω–µ –ø—Ä–æ ¬´—É–¥–∞—á—É —Å–ª—É—á–∞–π–Ω–æ¬ª. –û–Ω –ø—Ä–æ —è—Å–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é —É–∂–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.
–°–æ–ª–Ω—Ü–µ ‚Äî —ç—Ç–æ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –ø—Ä–∞–≤–¥–∞ –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞ —Å–≤–µ—Ç: –∏ —Ç–≤–æ–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã, –∏ —Ç–≤–æ–∏ –Ω–∞—Å—Ç–æ—è—â–∏–µ –∂–µ–ª–∞–Ω–∏—è.

–í—Å—ë, —á—Ç–æ –±—ã–ª–æ –º—É—Ç–Ω—ã–º, —Å—Ç–∞–Ω–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã–º.
–¢—ã –Ω–∞—á–Ω—ë—à—å –≤–∏–¥–µ—Ç—å, –≥–¥–µ —Ç—ã –∑–∞–Ω–∏–∂–∞–ª–∞ —Å–µ–±—è, –≥–¥–µ –ø—Ä—è—Ç–∞–ª–∞—Å—å, –≥–¥–µ —Å–æ–≥–ª–∞—à–∞–ª–∞—Å—å –Ω–∞ –º–µ–Ω—å—à–µ–µ —Ä–∞–¥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
–ò –≤ —ç—Ç–æ–º –∂–µ –≥–æ–¥—É –ø–æ—è–≤–∏—Ç—Å—è —ç–Ω–µ—Ä–≥–∏—è: –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è, –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä—è–º–æ, –∑–∞–Ω–∏–º–∞—Ç—å —Å–≤–æ—ë –º–µ—Å—Ç–æ.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –Ω–µ —Å–±–∞–≤–ª—è—Ç—å —Å–≤–µ—Ç.
–ù–µ –ø—Ä—è—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –Ω–µ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞—Ç—å –∏ –Ω–µ –∂–¥–∞—Ç—å ¬´–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞¬ª.
–°–æ–ª–Ω—Ü–µ –ª—é–±–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∏ —á–µ—Å—Ç–Ω—É—é —Ä–∞–¥–æ—Å—Ç—å ‚Äî –±–µ–∑ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–π.

–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏–º–µ–Ω–Ω–æ —Ç–≤–æ–π —Ä–æ—Å—Ç –∏ –∫–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–Ω–µ—Å—ë—Ç –≥–æ–¥?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ–∫–∞–∂–µ—Ç, –∫—É–¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ–∫—É—Å, —á—Ç–æ–±—ã –∑–∞–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º.`
      },
      {
        name: "–ë–∞—à–Ω—è",
        sphere: "–°–æ–±—ã—Ç–∏—è",
        image: "assets/tower.jpg",
        long:
`2026 –≥–æ–¥ –Ω–µ –±—É–¥–µ—Ç ¬´–ø–ª–∞–≤–Ω—ã–º¬ª. –û–Ω –±—É–¥–µ—Ç –æ—á–∏—â–∞—é—â–∏–º.
–ë–∞—à–Ω—è ‚Äî —ç—Ç–æ –ø—Ä–∏–≥–æ–≤–æ—Ä —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –¥–∞–≤–Ω–æ –¥–µ—Ä–∂–∞–ª–∞—Å—å –Ω–∞ —Ç–µ—Ä–ø–µ–Ω–∏–∏, —Å—Ç—Ä–∞—Ö–µ –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–∞—Ö.

–¢–æ, —á—Ç–æ –Ω–µ –∏–º–µ–ª–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞, –Ω–∞—á–Ω—ë—Ç —Ä—É—à–∏—Ç—å—Å—è.
–ò –¥–∞ ‚Äî –∏–Ω–æ–≥–¥–∞ —Ä–µ–∑–∫–æ. –ò–Ω–æ–≥–¥–∞ –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
–ù–æ —Å–º—ã—Å–ª –Ω–µ –≤ –±–æ–ª–∏. –°–º—ã—Å–ª –≤ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏: —Ç–µ–±–µ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ —Ç–∞—â–∏—Ç—å –Ω–∞ —Å–µ–±–µ —Ç–æ, —á—Ç–æ –∏—Å—Ç–æ—â–∞–µ—Ç.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –Ω–µ —Ä–µ–∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –º—ë—Ä—Ç–≤–æ–µ.
–ü—Ä–∏–Ω—è—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–∞–∫ —Ñ–∞–∫—Ç. –ò –Ω–µ —Ü–µ–ø–ª—è—Ç—å—Å—è –∑–∞ —Ñ–æ—Ä–º—É, –∫–æ–≥–¥–∞ –∂–∏–∑–Ω—å –ø—Ä–æ—Å–∏—Ç —Ç–µ–±—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å.
–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ —Å—Ç–∞–Ω–µ—Ç –ø–ª–æ—â–∞–¥–∫–æ–π –¥–ª—è —Å–∏–ª—å–Ω–æ–π, —á–µ—Å—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã ‚Äî —É–∂–µ –ø–æ —Ç–≤–æ–∏–º –ø—Ä–∞–≤–∏–ª–∞–º.

–ì–æ—Ç–æ–≤(–∞) —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –±—É–¥–µ—Ç ¬´–ª–æ–º–∞—Ç—å—Å—è¬ª –∏ —á—Ç–æ –ø—Ä–∏–¥—ë—Ç –Ω–∞ –∑–∞–º–µ–Ω—É?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –¥–∞—Å—Ç —Å—Ö–µ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç.`
      },
      {
        name: "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞",
        sphere: "–†–µ—Å—É—Ä—Å—ã",
        image: "assets/empress.jpg",
        long:
`2026 –≥–æ–¥ ‚Äî –ø—Ä–æ —É–º–Ω–æ–∂–µ–Ω–∏–µ. –ù–æ –Ω–µ —á–µ—Ä–µ–∑ –Ω–∞–¥—Ä—ã–≤. –ß–µ—Ä–µ–∑ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏–µ.
–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å, –Ω–æ —Ç—ã –º–æ–≥–ª–∞ –Ω–µ —Å—á–∏—Ç–∞—Ç—å –µ–≥–æ –≤–∞–∂–Ω—ã–º.

–≠—Ç–æ –≥–æ–¥, –∫–æ–≥–¥–∞ –ø–ª–æ–¥–æ—Ä–æ–¥–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç—É–¥–∞, –≥–¥–µ –µ—Å—Ç—å –∑–∞–±–æ—Ç–∞, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ.
–¢–≤–æ–π —Ä–µ—Å—É—Ä—Å ‚Äî —Ç–µ–ª–æ, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –ø—Ä–æ–µ–∫—Ç, –∏–¥–µ—è, –æ—Ç–Ω–æ—à–µ–Ω–∏—è ‚Äî –≤—Å—ë, —á—Ç–æ —Ç—ã –ø–∏—Ç–∞–µ—à—å, –Ω–∞—á–Ω—ë—Ç –æ—Ç–≤–µ—á–∞—Ç—å —Ä–æ—Å—Ç–æ–º.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –∂–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ ¬´—Å–Ω–∞—á–∞–ª–∞ –≤—ã–∂–∏–≤—É ‚Äî –ø–æ—Ç–æ–º –ø–æ–∂–∏–≤—É¬ª.
–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ —Ç—Ä–µ–±—É–µ—Ç –¥—Ä—É–≥–æ–≥–æ: —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–æ–ª–Ω—è—é—Å—å ‚Äî –ø–æ—Ç–æ–º —Å–æ–∑–¥–∞—é.
–ò —ç—Ç–æ –Ω–µ –∫–∞–ø—Ä–∏–∑. –≠—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è.

–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ —Ç–≤–æ—è —Ç–æ—á–∫–∞ –∏–∑–æ–±–∏–ª–∏—è –∏ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–∏–Ω–µ—Å—ë—Ç —Ä–æ—Å—Ç?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ —É—Å–∏–ª–∏–≤–∞—Ç—å –∏ –∫–∞–∫ –Ω–µ —Ä–∞—Å–ø–ª–µ—Å–∫–∞—Ç—å —Ä–µ—Å—É—Ä—Å.`
      },
      {
        name: "–®—É—Ç",
        sphere: "–ù–æ–≤—ã–µ –Ω–∞—á–∞–ª–∞",
        image: "assets/fool.jpg",
        long:
`2026 –≥–æ–¥ ‚Äî –ø—Ä–æ –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π.
–®—É—Ç ‚Äî —ç—Ç–æ –Ω–µ ¬´–ª–µ–≥–∫–æ–º—ã—Å–ª–µ–Ω–Ω–æ¬ª. –≠—Ç–æ ¬´—è –≤—ã–±–∏—Ä–∞—é –∂–∏–∑–Ω—å, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –∑–Ω–∞—é –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤¬ª.

–¢–µ–±—è –º–æ–∂–µ—Ç —Ç—è–Ω—É—Ç—å –∫ —Å–º–µ–Ω–µ –∫—É—Ä—Å–∞: –∏–¥–µ–∏, –ø—Ä–æ–µ–∫—Ç—ã, –Ω–æ–≤—ã–µ –ª—é–¥–∏, –Ω–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
–ò –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö: –∞ –≤–¥—Ä—É–≥ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è? –∞ –≤–¥—Ä—É–≥ —è –æ—à–∏–±—É—Å—å?
–ù–æ –®—É—Ç –Ω–µ –¥–∞—ë—Ç —Ç–µ–±–µ –ø—Ä–∞–≤–∞ –∂–¥–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ—Å—Ç–∏.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π —à–∞–≥.
–ù–µ –ø—Ä–æ—Å—á–∏—Ç–∞—Ç—å –≤–µ—Å—å –ø—É—Ç—å ‚Äî –∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ.
–ü–æ—Ç–æ–º—É —á—Ç–æ –¥–∞–ª—å—à–µ –Ω–∞—á–Ω—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏, —Ä–µ—Å—É—Ä—Å—ã –∏ ‚Äú—Å–ª—É—á–∞–π–Ω—ã–µ‚Äù —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.

–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–µ –∏–º–µ–Ω–Ω–æ –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ –∂–¥—ë—Ç —Ç–µ–±—è –≤ 2026 –∏ –≥–¥–µ —Ç–≤–æ–π –ª—É—á—à–∏–π —Å—Ç–∞—Ä—Ç?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –∏ –ø–µ—Ä–≤—ã–µ —à–∞–≥–∏.`
      },
      {
        name: "–í–ª—é–±–ª—ë–Ω–Ω—ã–µ",
        sphere: "–û—Ç–Ω–æ—à–µ–Ω–∏—è",
        image: "assets/lovers.jpg",
        long:
`2026 –≥–æ–¥ –ø–æ—Å—Ç–∞–≤–∏—Ç —Ç–µ–±—è –ø–µ—Ä–µ–¥ –≤—ã–±–æ—Ä–æ–º.
–í–ª—é–±–ª—ë–Ω–Ω—ã–µ ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –ª—é–±–æ–≤—å. –≠—Ç–æ –ø—Ä–æ —á–µ—Å—Ç–Ω–æ—Å—Ç—å: –≥–¥–µ —Ç–≤–æ—ë ‚Äú–¥–∞‚Äù, –∞ –≥–¥–µ —Ç—ã –∂–∏–≤—ë—à—å —á—É–∂–∏–º–∏ –æ–∂–∏–¥–∞–Ω–∏—è–º–∏.

–ú–æ–≥—É—Ç –ø–æ–¥–Ω—è—Ç—å—Å—è —Ç–µ–º—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–∞, –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–µ–π, –≥—Ä–∞–Ω–∏—Ü.
–ù–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ä–µ—à–µ–Ω–∏–µ: –≤—ã–±–∏—Ä–∞—Ç—å —Å–µ–±—è –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –±—ã—Ç—å —É–¥–æ–±–Ω–æ–π(—ã–º).

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–∞—Ç—å—Å—è —Å —Å–æ–±–æ–π.
–í—ã–±–æ—Ä –±—É–¥–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã–º, –µ—Å–ª–∏ —Ç—ã –≤–µ—Ä–Ω—ë—à—å—Å—è –∫ —Ü–µ–Ω–Ω–æ—Å—Ç—è–º.
–≠—Ç–æ –≥–æ–¥, –∫–æ–≥–¥–∞ —Ä–µ—à–µ–Ω–∏–µ ‚Äú–¥–∞/–Ω–µ—Ç‚Äù –º–µ–Ω—è–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –Ω–∞–¥–æ–ª–≥–æ.

–•–æ—á–µ—à—å —É–≤–∏–¥–µ—Ç—å, –∫ —á–µ–º—É –ø—Ä–∏–≤–µ–¥—ë—Ç –∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏ –≥–¥–µ —Ç–≤–æ—è —Ç–æ—á–∫–∞ —Å–∏–ª—ã?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –¥–∞—Å—Ç —è—Å–Ω–æ—Å—Ç—å –∏ —Å–Ω–∏–º–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —à—É–º.`
      },
      {
        name: "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã",
        sphere: "–°–æ–±—ã—Ç–∏—è",
        image: "assets/wheel.jpg",
        long:
`2026 –≥–æ–¥ –º–æ–∂–µ—Ç —Ä–µ–∑–∫–æ —É—Å–∫–æ—Ä–∏—Ç—å—Å—è.
–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã ‚Äî —ç—Ç–æ –ø–æ–≤–æ—Ä–æ—Ç, —à–∞–Ω—Å, —Å–º–µ–Ω–∞ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤ –∏ –æ—â—É—â–µ–Ω–∏–µ: ¬´–≤—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —è —É—Å–ø–µ–≤–∞—é –ø–æ–¥—É–º–∞—Ç—å¬ª.

–¢—ã –º–æ–∂–µ—à—å –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –Ω–æ–≤—ã–µ –¥–æ—Ä–æ–≥–∏.
–ò —Ç—É—Ç –≤–∞–∂–Ω–æ –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –º–µ–ª–æ—á—å.
–ö–æ–ª–µ—Å–æ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è ‚Äî –æ–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –±—ã—Ç—å –≥–∏–±–∫–æ–π(–∏–º) –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–π(—ã–º).
–ü–æ–π–º–∞—Ç—å –º–æ–º–µ–Ω—Ç, –ø–æ–∫–∞ –æ–Ω –æ—Ç–∫—Ä—ã—Ç.
–ò –≤—ã–±–∏—Ä–∞—Ç—å —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ç–≤–æ–π –ø—É—Ç—å, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç ‚Äú–∫—Ä—É—Ç–æ‚Äù.

–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ —Ç–≤–æ–π —à–∞–Ω—Å –≤ 2026 –∏ –∫–∞–∫ –µ–≥–æ –Ω–µ —É–ø—É—Å—Ç–∏—Ç—å?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ–∫–∞–∂–µ—Ç –æ–∫–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –ª—É—á—à–∏–π –º–∞—Ä—à—Ä—É—Ç.`
      },
      {
        name: "–°–∏–ª–∞",
        sphere: "–†–µ—Å—É—Ä—Å—ã",
        image: "assets/strength.jpg",
        long:
`2026 –≥–æ–¥ –Ω–µ –ø—Ä–æ –¥–∞–≤–ª–µ–Ω–∏–µ. –û–Ω –ø—Ä–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.
–°–∏–ª–∞ ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã –Ω–µ –¥–æ–∫–∞–∑—ã–≤–∞–µ—à—å, –Ω–µ –≤–æ—é–µ—à—å –∏ –Ω–µ —Å—Ä—ã–≤–∞–µ—à—å—Å—è. –¢—ã –ø—Ä–æ—Å—Ç–æ –¥–µ—Ä–∂–∏—à—å —Å–≤–æ—ë.

–≠—Ç–æ—Ç –≥–æ–¥ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å: —Å–æ–±–ª–∞–∑–Ω —Ä–µ–∑–∫–æ –±—Ä–æ—Å–∏—Ç—å, —Ä–µ–∑–∫–æ –∑–∞–∫—Ä—ã—Ç—å, —Ä–µ–∑–∫–æ —É–π—Ç–∏.
–ù–æ —Ç–≤–æ–π —Ä–æ—Å—Ç ‚Äî –≤ –¥—Ä—É–≥–æ–º: –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
–í —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—ã–¥–µ—Ä–∂–∞—Ç—å —ç–º–æ—Ü–∏—é, –Ω–µ —Ä–∞–∑—Ä—É—à–∏–≤ —Ç–æ, —á—Ç–æ —Ç—ã —Å—Ç—Ä–æ–∏—à—å.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –ø—Ä–∏—Ä—É—á–∏—Ç—å –∏–º–ø—É–ª—å—Å—ã.
–ù–µ –ø–æ–¥–∞–≤–ª—è—Ç—å, –∞ —É–ø—Ä–∞–≤–ª—è—Ç—å.
–°–∏–ª–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –º—è–≥–∫–æ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∂—ë—Å—Ç–∫–æ: –æ–Ω–∞ –¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ —Å–¥–∞—é—Ç—Å—è.

–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å, –≥–¥–µ —Ç–≤–æ—è —Ç–æ—á–∫–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ —á—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å–∏—Ç—å –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã?
–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥ –ø–æ–∫–∞–∂–µ—Ç –æ–ø–æ—Ä—ã –∏ ‚Äú—Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞‚Äù –∑–∞—Ä–∞–Ω–µ–µ.`
      }
    ];

    const state = { locked:false, picked:null, cardNodes:[], count:8 };
    const $ = (id) => document.getElementById(id);

    function showScreen(which){
      ["screenWheel","screenPicked","screenText"].forEach(id => {
        $(id).classList.toggle("active", id === which);
      });
    }

    function randomPick(){
      return TAROT[Math.floor(Math.random() * TAROT.length)];
    }

    function setPickedUI(card){
      $("pillSphere").textContent = `–°–§–ï–†–ê: ${card.sphere.toUpperCase()}`;
      $("pillName").textContent = card.name;

      $("textSphere").textContent = `–°–§–ï–†–ê: ${card.sphere.toUpperCase()}`;
      $("textName").textContent = card.name;
      $("textPanel").textContent = card.long;

      const flip = $("pickedFlip");
      const back = $("pickedBack");
      const frontImg = $("pickedFrontImg");

      flip.classList.remove("revealed");
      back.style.backgroundImage = `url('${BACK_IMAGE}')`;
      frontImg.src = card.image;
      frontImg.onerror = () => frontImg.removeAttribute("src");

      setTimeout(() => flip.classList.add("revealed"), 260);
    }

    function buildStars(){
      const wrap = $("stars");
      wrap.innerHTML = "";
      const count = 34;
      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        s.className = "star" + (Math.random() > 0.82 ? " big" : "");
        s.style.left = (Math.random()*100).toFixed(2) + "%";
        s.style.top  = (Math.random()*100).toFixed(2) + "%";
        s.style.setProperty("--tw", (1200 + Math.random()*2200).toFixed(0) + "ms");
        s.style.animationDelay = (Math.random()*1200).toFixed(0) + "ms";
        wrap.appendChild(s);
      }
    }

    function makeWheel(){
      const wheel = $("wheel");
      wheel.innerHTML = "";
      state.cardNodes = [];

      const rect = wheel.getBoundingClientRect();
      const size = Math.min(rect.width || 320, rect.height || 320);
      const center = size / 2;
      const radius = size * 0.36;
      const startAngle = -90;

      for(let i=0;i<state.count;i++){
        const angle = startAngle + (360 / state.count) * i;
        const cardW = (window.innerWidth <= 360) ? 86 : 92;
        const cardH = (window.innerWidth <= 360) ? 134 : 142;

        const x = center + radius * Math.cos(angle * Math.PI/180) - cardW/2;
        const y = center + radius * Math.sin(angle * Math.PI/180) - cardH/2;

        const el = document.createElement("div");
        el.className = "tarotCard";
        el.style.left = `${x}px`;
        el.style.top  = `${y}px`;

        const face = document.createElement("div");
        face.className = "cardFace";
        face.style.backgroundImage = `url('${BACK_IMAGE}')`;

        el.appendChild(face);
        el.addEventListener("click", () => onCardClick(el));

        wheel.appendChild(el);
        state.cardNodes.push(el);
      }
    }

    async function animateShuffleToStack(){
      const wheel = $("wheel");
      const wheelRect = wheel.getBoundingClientRect();
      const stackX = wheelRect.left + wheelRect.width/2;
      const stackY = wheelRect.top  + wheelRect.height/2 + 6;
      const orbitR = Math.min(wheelRect.width, wheelRect.height) * 0.33;

      const steps = 15;
      const baseDur = 1180;
      const stackDur = 620;
      const ease = "cubic-bezier(.16,.84,.25,1)";

      const animations = state.cardNodes.map((el, idx) => {
        const r = el.getBoundingClientRect();
        const curX = r.left;
        const curY = r.top;
        const phase = (Math.PI * 2 / state.count) * idx;

        const keyframes = [];
        for(let s=0; s<steps; s++){
          const t = s/(steps-1);
          const ang = phase + t * (Math.PI*2) * 1.02;
          const targetX = stackX + orbitR * Math.cos(ang) - r.width/2;
          const targetY = stackY + orbitR * Math.sin(ang) - r.height/2;
          const tx = targetX - curX;
          const ty = targetY - curY;
          const rot = (t*320) + (idx*6);
          keyframes.push({ transform: `translate(${tx}px, ${ty}px) rotate(${rot}deg)`, offset: t });
        }

        const targetStackX = stackX - r.width/2 + (Math.random()*8 - 4);
        const targetStackY = stackY - r.height/2 + (Math.random()*8 - 4);
        const stx = targetStackX - curX;
        const sty = targetStackY - curY;

        const anim = el.animate(keyframes, { duration: baseDur, easing: ease, fill: "forwards" });
        return anim.finished.then(() => {
          return el.animate(
            [
              { transform: keyframes[keyframes.length-1].transform },
              { transform: `translate(${stx}px, ${sty}px) rotate(${Math.random()*8 - 4}deg)` }
            ],
            { duration: stackDur, easing: ease, fill: "forwards" }
          ).finished;
        });
      });
      return Promise.all(animations);
    }

    async function onCardClick(clickedEl){
      if(state.locked) return;
      state.locked = true;
      state.picked = randomPick();
      await animateShuffleToStack();
      state.cardNodes.forEach(el => {
        if(el !== clickedEl) el.classList.add("pickedOut");
      });
      showScreen("screenPicked");
      setPickedUI(state.picked);
    }

    function sendToChat(){
      if(!state.picked) return;
      const payload = {
        type: "tarot_reading",
        card: state.picked.name,
        sphere: state.picked.sphere,
        text: state.picked.long
      };
      const dataStr = JSON.stringify(payload);
      if(window.Telegram && window.Telegram.WebApp && typeof window.Telegram.WebApp.sendData === "function"){
        window.Telegram.WebApp.sendData(dataStr);
        return;
      }
      navigator.clipboard?.writeText(state.picked.long)
        .then(() => alert("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω. –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —á–∞—Ç üôÇ"))
        .catch(() => alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å."));
    }

    function goFull(){
      if(FULL_READING_LINK && FULL_READING_LINK.trim().length > 0){
        window.open(FULL_READING_LINK, "_blank");
        return;
      }
      if(window.Telegram && window.Telegram.WebApp && typeof window.Telegram.WebApp.sendData === "function"){
        window.Telegram.WebApp.sendData(JSON.stringify({ type: "buy_full_reading" }));
        return;
      }
      alert("–î–æ–±–∞–≤—å —Å—Å—ã–ª–∫—É –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é FULL_READING_LINK.");
    }

    $("btnDecode").addEventListener("click", () => {
      if(!state.picked) return;
      showScreen("screenText");
      $("textPanel").scrollTop = 0;
    });

    $("btnSend").addEventListener("click", sendToChat);
    $("btnFull").addEventListener("click", goFull);

    try{
      if(window.Telegram && window.Telegram.WebApp){
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();
      }
    }catch(e){}

    buildStars();

    window.addEventListener("load", () => {
      const intro = $("intro");
      const wheel = $("wheel");
      makeWheel();
      setTimeout(() => {
        intro.classList.remove("show");
        setTimeout(() => wheel.classList.add("ready"), 120);
      }, 2600);
    });

    window.addEventListener("resize", () => {
      if(state.locked) return;
      makeWheel();
    });
  </script>
</body>
</html>