<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>–¢–∞—Ä–æ ‚Äî –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>

  <style>
    :root{
      --bg1:#2b1670;
      --bg2:#0b0f2b;
      --text:#ffffff;
      --muted: rgba(255,255,255,.72);

      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --radius: 18px;

      /* gold gradient like reference */
      --gold1:#fff4b0;
      --gold2:#f2c44c;
      --gold3:#d59b1a;

      --btnGlow: 0 0 0 1px rgba(255,255,255,.12),
                 0 18px 40px rgba(0,0,0,.35),
                 0 0 34px rgba(242,196,76,.38);

      --btnGlowStrong: 0 0 0 1px rgba(255,255,255,.16),
                       0 22px 52px rgba(0,0,0,.45),
                       0 0 46px rgba(242,196,76,.52);
    }

    *{ box-sizing:border-box; }
    html,body{
      height:100%;
      margin:0;
      padding:0;
      overflow:hidden;
      background: #0b0f2b;
    }

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(280px 280px at 50% 35%, rgba(255,255,255,.12), transparent 60%),
        radial-gradient(420px 420px at 50% 55%, rgba(0,0,0,.35), transparent 65%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    .app{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      padding: 14px 14px 18px;
      gap: 12px;
      position: relative;
    }

    .screen{
      width:100%;
      max-width: 420px;
      flex:1;
      display:none;
      position:relative;
      padding: 0;
      z-index: 2;
      min-height: 0;
    }
    .screen.active{
      display: flex;
      flex-direction: column;
    }

    /* ===== Wheel screen ===== */
    .wheelWrap{
      height: 100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 18px;
      padding-bottom: 12px;
    }

    .wheel{
      position:relative;
      width: 320px;
      height: 320px;
      max-width: 92vw;
      max-height: 92vw;
      border-radius: 999px;
      display:block;
      filter: drop-shadow(0 24px 40px rgba(0,0,0,.35));
      opacity: 1;
      transform: translateY(0);
    }

    .hint{
      text-align:center;
      color: rgba(255,255,255,.92);
      font-size: 20px;
      font-weight: 800;
      line-height: 1.2;

      /* ‚úÖ –æ–ø—É—Å–∫–∞–µ–º –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–æ—Å—å –∫–∞—Ä—Ç–∞–º–∏ */
      margin-top: 46px;

      text-shadow: 0 12px 24px rgba(0,0,0,.35);
      letter-spacing: .2px;

      /* ‚úÖ –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è */
      position: relative;
      z-index: 5;
    }

    .tarotCard{
      position:absolute;
      width: 92px;
      height: 142px;
      border-radius: 14px;
      cursor:pointer;
      user-select:none;
      transition: filter 200ms ease, opacity 200ms ease;
      will-change: transform;
      transform-origin: 50% 50%;
    }

    .cardFace{
      width:100%;
      height:100%;
      border-radius:14px;
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 14px 30px rgba(0,0,0,.35), 0 0 20px rgba(255,255,255,.08);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      overflow:hidden;
      position:relative;
    }
    .tarotCard .cardFace::after{
      content:"";
      position:absolute;
      inset:-10px;
      background: radial-gradient(80px 80px at 50% 30%, rgba(242,196,76,.16), transparent 60%);
      opacity: .75;
      pointer-events:none;
    }

    .pickedOut{
      opacity: 0.14;
      filter: blur(0.7px);
      pointer-events:none;
    }

    /* ===== Picked screen (ref spacing) ===== */
    .pickedWrap{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      padding-top: 74px; /* like reference */
      gap: 22px;
    }

    .pill{
      width:100%;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      padding: 12px 16px;
      text-align:center;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    .pillSmall{
      font-size: 12px;
      letter-spacing:.7px;
      color: rgba(255,255,255,.72);
      text-transform: uppercase;
      margin-bottom: 2px;
    }
    .pillBig{
      font-size: 20px;
      font-weight: 900;
      letter-spacing: .2px;
    }

    .pickedFlip{
      width: 185px;
      height: 282px;
      perspective: 1100px;
      filter: drop-shadow(0 28px 60px rgba(0,0,0,.42));
    }
    .pickedInner{
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 760ms cubic-bezier(.2,.9,.2,1);
      border-radius: 18px;
      box-shadow: 0 0 0 1px rgba(255,255,255,.14),
                  0 22px 48px rgba(0,0,0,.44),
                  0 0 44px rgba(242,196,76,.20);
    }
    .pickedFlip.revealed .pickedInner{
      transform: rotateY(180deg);
    }
    .pickedFace{
      position:absolute;
      inset:0;
      border-radius: 18px;
      overflow:hidden;
      backface-visibility: hidden;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
    }
    .pickedBack{
      background-size: cover;
      background-position: center;
    }
    .pickedFront{
      transform: rotateY(180deg);
    }
    .pickedFront img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    /* ===== Buttons (gold gradient + glow) ===== */
    .btnPrimary,
    .btnGold{
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 16px 18px;
      font-weight: 900;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      cursor:pointer;
      font-size: 16px;
      color: #1b1b1b;
      background: linear-gradient(180deg, var(--gold1), var(--gold2) 55%, var(--gold3));
      box-shadow: var(--btnGlowStrong);
      transition: transform 120ms ease, filter 120ms ease;
    }
    .btnPrimary:active,
    .btnGold:active{
      transform: translateY(1px) scale(.995);
      filter: brightness(.98);
    }

    /* ===== Text screen (fit to content & centered) ===== */
    .textWrap{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      padding-top: 18px;
      overflow: hidden;
    }

    .heading{
      flex-shrink: 0;
      width: 100%;
      text-align: center;
      padding: 6px 2px 12px;
    }
    .headingSmall{
      color: rgba(255,255,255,.74);
      text-transform: uppercase;
      letter-spacing: .7px;
      font-size: 12px;
      margin-bottom: 6px;
    }
    .headingBig{
      font-size: 24px;
      font-weight: 900;
      margin: 0;
      letter-spacing: .2px;
    }

    .textPanel{
      width:100%;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 16px;
      color: rgba(255,255,255,.92);
      line-height: 1.55;
      font-size: 15px;
      white-space: pre-line;

      /* IMPORTANT: fit to content (no empty space), still scroll if huge */
      flex: 0 1 auto;
      max-height: calc(100vh - 250px);
      overflow-y: auto;

      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,.25) transparent;
      overscroll-behavior: contain;
      -webkit-overflow-scrolling: touch;
    }

    .bottomBtns{
      width: 100%;
      margin-top: 16px;
      flex-shrink: 0;
      display:flex;
      flex-direction:column;
      gap: 12px;
      padding: 10px 0 4px;
      background: linear-gradient(180deg, rgba(11,15,43,0) 0%, rgba(11,15,43,.85) 35%);
    }

    .btnSecondary,
    .btnGhost{
      width:100%;
      border-radius: 999px;
      padding: 16px 18px;
      font-weight: 900;
      cursor:pointer;
      font-size: 16px;
      letter-spacing: .3px;
      box-shadow: var(--btnGlow);
      transition: transform 120ms ease, filter 120ms ease;
    }
    .btnSecondary{
      border: none;
      color: #1b1b1b;
      background: linear-gradient(180deg, var(--gold1), var(--gold2) 55%, var(--gold3));
    }
    .btnGhost{
      border: none;
      color: #1b1b1b;
      background: linear-gradient(180deg, var(--gold1), var(--gold2) 55%, var(--gold3));
    }
    .btnSecondary:active,
    .btnGhost:active{
      transform: translateY(1px) scale(.995);
      filter: brightness(.98);
    }

    /* ====== MODAL: "–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥" ====== */
    .modalOverlay{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 9999;
      background: rgba(0,0,0,.60);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .modalOverlay.isOpen{ display:flex; }

    .modalCard{
      width: min(560px, 100%);
      max-height: 86vh;
      overflow: auto;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 20px;
      box-shadow: var(--shadow);
      padding: 16px 14px 14px;
      color: rgba(255,255,255,.92);
      -webkit-overflow-scrolling: touch;
    }

    .modalTop{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .modalTitle{
      margin: 0;
      font-size: 18px;
      font-weight: 900;
      letter-spacing: .2px;
      color: #fff;
      line-height: 1.2;
    }

    .modalClose{
      border: 0;
      background: rgba(255,255,255,.10);
      color: #fff;
      width: 40px;
      height: 40px;
      border-radius: 14px;
      cursor: pointer;
      flex: 0 0 auto;
      box-shadow: 0 0 0 1px rgba(255,255,255,.10);
    }
    .modalClose:active{ transform: translateY(1px); }

    .modalText{
      margin: 0 0 10px;
      line-height: 1.55;
      opacity: .95;
      white-space: pre-line;
    }

    .modalBlock{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      padding: 12px;
      margin: 10px 0;
    }

    .modalEmojiTitle{
      margin: 0 0 6px;
      font-weight: 900;
      color: #fff;
    }

    .modalList{
      margin: 8px 0 0 18px;
      padding: 0;
      line-height: 1.55;
      opacity: .95;
    }

    .modalPrice{
      margin-top: 10px;
      padding: 12px;
      border-radius: 16px;
      background: rgba(242,196,76,.12);
      border: 1px solid rgba(242,196,76,.22);
    }

    .modalFooter{
      margin-top: 12px;
      position: sticky;
      bottom: 0;
      padding-top: 10px;
      background: linear-gradient(to top, rgba(11,15,43,.92), rgba(11,15,43,0));
    }

    .payBtn{
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 16px 18px;
      font-weight: 900;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      cursor: pointer;
      font-size: 16px;
      color: #1b1b1b;
      background: linear-gradient(180deg, var(--gold1), var(--gold2) 55%, var(--gold3));
      box-shadow: var(--btnGlowStrong);
      transition: transform 120ms ease, filter 120ms ease;
    }
    .payBtn:active{
      transform: translateY(1px) scale(.995);
      filter: brightness(.98);
    }

    @media (max-width: 360px){
      .wheel{ width: 285px; height: 285px; }
      .tarotCard{ width: 86px; height: 134px; }
      .pickedFlip{ width: 170px; height: 260px; }

      /* ‚úÖ —Ç–æ–∂–µ –æ–ø—É—Å–∫–∞–µ–º –Ω–∏–∂–µ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
      .hint{ font-size: 18px; margin-top: 56px; }

      .btnPrimary, .btnSecondary, .btnGhost{ font-size: 15px; padding: 15px 16px; }
      .headingBig{ font-size: 22px; }
      .textPanel { font-size: 14px; max-height: calc(100vh - 240px); }
      .pickedWrap{ padding-top: 62px; }

      .modalTitle{ font-size: 17px; }
      .payBtn{ font-size: 15px; padding: 15px 16px; }
    }
  </style>
</head>

<body>
  <div class="app">

    <section class="screen active" id="screenWheel">
      <div class="wheelWrap">
        <div class="wheel" id="wheel"></div>
        <div class="hint" id="hintText">–í—ã–±–µ—Ä–∏—Ç–µ 1 –∫–∞—Ä—Ç—É</div>
      </div>
    </section>

    <section class="screen" id="screenPicked">
      <div class="pickedWrap">
        <div class="pill">
          <div class="pillSmall" id="pillSphere">–°–§–ï–†–ê: –ö–ê–†–¢–ê –î–ù–Ø</div>
          <div class="pillBig" id="pillName">‚Äî</div>
        </div>

        <div class="pickedFlip" id="pickedFlip">
          <div class="pickedInner">
            <div class="pickedFace pickedBack" id="pickedBack"></div>
            <div class="pickedFace pickedFront">
              <img id="pickedFrontImg" alt="–ö–∞—Ä—Ç–∞" />
            </div>
          </div>
        </div>

        <button class="btnPrimary" id="btnDecode">–ü–û–õ–£–ß–ò–¢–¨ –†–ê–°–®–ò–§–†–û–í–ö–£</button>
      </div>
    </section>

    <section class="screen" id="screenText">
      <div class="textWrap">
        <div class="heading">
          <div class="headingSmall" id="textSphere">–ö–ê–†–¢–ê –î–ù–Ø</div>
          <h2 class="headingBig" id="textName">‚Äî</h2>
        </div>

        <div class="textPanel" id="textPanel"></div>

        <div class="bottomBtns">
          <button class="btnSecondary" id="btnSend">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç</button>
          <button class="btnGhost" id="btnFull">–•–æ—á—É –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥!</button>
        </div>
      </div>
    </section>
  </div>

  <!-- ====== MODAL HTML: "–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥" ====== -->
  <div id="fullReadingModal" class="modalOverlay" aria-hidden="true">
    <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="fullReadingTitle">
      <div class="modalTop">
        <h3 class="modalTitle" id="fullReadingTitle">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä</h3>
        <button class="modalClose" id="fullReadingClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </div>

      <p class="modalText">–í –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–º —Ä–∞–∑–±–æ—Ä–µ –º—ã –∏–¥–µ–º –≤ —Å–∞–º—É—é –≥–ª—É–±—å. –¢—ã –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –ª—é–±—É—é —Å—Ñ–µ—Ä—É:</p>

      <div class="modalBlock">
        <p class="modalEmojiTitle">üíô –û—Ç–Ω–æ—à–µ–Ω–∏—è</p>
        <p class="modalText">–ü–æ–π–º–µ–º, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —á—É–≤—Å—Ç–≤—É–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä, –ø–æ—á–µ–º—É –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –ø—Ä–∏–π—Ç–∏ –∫ –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º</p>
      </div>

      <div class="modalBlock">
        <p class="modalEmojiTitle">üí∞ –§–∏–Ω–∞–Ω—Å—ã</p>
        <p class="modalText">–£–≤–∏–¥–∏–º, –∫–∞–∫–∏–µ –±–ª–æ–∫–∏ –º–µ—à–∞—é—Ç —Ä–æ—Å—Ç—É, –≥–¥–µ —Å–∫—Ä—ã—Ç —Ç–≤–æ–π –¥–µ–Ω–µ–∂–Ω—ã–π —Ä–µ—Å—É—Ä—Å –∏ –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–Ω–µ—Å—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</p>
      </div>

      <div class="modalBlock">
        <p class="modalEmojiTitle">üíé –†–µ–∞–ª–∏–∑–∞—Ü–∏—è</p>
        <p class="modalText">–†–∞–∑–±–µ—Ä–µ–º —Ç–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª, –Ω–∞–π–¥–µ–º –¥–µ–ª–æ –ø–æ –¥—É—à–µ –∏ –ø–æ–π–º–µ–º, –≤ –∫–∞–∫–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ç–µ–±–µ —Å–µ–π—á–∞—Å —Å—Ç–æ–∏—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è</p>
      </div>

      <div class="modalBlock">
        <p class="modalText"><b>–ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å:</b></p>
        <ul class="modalList">
          <li>–∞–Ω–∞–ª–∏–∑ —Ç–≤–æ–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏</li>
          <li>–æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ —á–µ—Ç–∫–∏–π –ø—Ä–æ–≥–Ω–æ–∑</li>
          <li>—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–∞–∫ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ —Ç–≤–æ—é –ø–æ–ª—å–∑—É.</li>
        </ul>
      </div>

      <div class="modalPrice">
        <p class="modalText">–°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ —Ç–æ–ª—å–∫–æ 3 –¥–Ω—è ‚Äî <b>2 500 —Ä—É–±.</b> –≤–º–µ—Å—Ç–æ <s>3 000 —Ä—É–±.</s></p>
        <p class="modalText">–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —è —Å–≤—è–∂—É—Å—å —Å —Ç–æ–±–æ–π –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π —Ç–≤–æ–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞</p>
      </div>

      <div class="modalFooter">
        <button class="payBtn" id="payBtn">–û–ø–ª–∞—Ç–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <script>
    // ====== –ù–ê–°–¢–†–û–ô–ö–ò ======
    const BACK_IMAGE = "assets/back.jpg";

    // –µ—Å–ª–∏ true ‚Äî –º–∏–Ω–∏–∞–ø —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å ?from=bot
    const REQUIRE_FROM_BOT_PARAM = true;

    // 1 —Ä–∞—Å–∫–ª–∞–¥ –≤ –¥–µ–Ω—å ‚Äî –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∏ user.id
    const TIMEZONE = "Europe/Bucharest";

    // ====== –î–ê–ù–ù–´–ï –ö–ê–†–¢ (10 —à—Ç) ======
    const TAROT = [
      { id: 1, name: "I –ú–ê–ì", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/mag.jpg",
        long:
`–î–µ–Ω—å –ª–∏—á–Ω–æ–π —Å–∏–ª—ã –∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã. –í—ã –≥–ª–∞–≤–Ω—ã–π —Ä–µ–∂–∏—Å—Å–µ—Ä, –∏ —Å–µ–≥–æ–¥–Ω—è —É –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –≤–æ–ø–ª–æ—Ç–∏—Ç—å –∏–¥–µ–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.

üí† –î–µ–π—Å—Ç–≤–∏–µ. –ò–¥–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –∏ –ø–µ—Ä–≤—ã—Ö —à–∞–≥–æ–≤.
üí† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç. –í–∞—à —Ä–∞–∑—É–º –æ—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ –¥–ª—è –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤.
üí† –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ. –í–∞—à–∏ –Ω–∞–≤—ã–∫–∏ —Å–µ–≥–æ–¥–Ω—è —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ 100%.
üí† –í–æ–ª—è. –ù–µ –∂–¥–∏—Ç–µ –∑–Ω–∞–∫–æ–≤, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏—è —Å–∞–º–∏.

–°–æ–≤–µ—Ç: –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –æ—Ç —Å–ª–æ–≤ –∫ –¥–µ–ª—É. –£ –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Ä—ã–≤–∫–∞.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –û—Ç—Å–ª–µ–¥–∏—Ç–µ —Å–µ–≥–æ–¥–Ω—è –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ –≤—ã —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å –≤ —Å–≤–æ–µ–π –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏. –°–∫–∞–∂–∏—Ç–µ —Å–µ–±–µ: ¬´–Ø –∏–º–µ—é –ø—Ä–∞–≤–æ –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è –∏ –∑–∞—è–≤–ª—è—Ç—å –æ —Å–≤–æ–∏—Ö –∂–µ–ª–∞–Ω–∏—è—Ö¬ª. –°–¥–µ–ª–∞–π—Ç–µ –æ–¥–Ω–æ –º–∞–ª–µ–Ω—å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–∞–≤–Ω–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–ª–∏ –∏–∑-–∑–∞ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.` },
      { id: 2, name: "VIII –°–ò–õ–ê", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/strength.jpg",
        long:
`–î–µ–Ω—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç–æ–π–∫–æ—Å—Ç–∏ –∏ –º—è–≥–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü–æ–±–µ–¥–∞ —Å–µ–≥–æ–¥–Ω—è –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –≤—ã–¥–µ—Ä–∂–∫–æ–π –∏ –ª—é–±–æ–≤—å—é –∫ —Å–≤–æ–µ–º—É ¬´–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –∑–≤–µ—Ä—é¬ª, –Ω–µ —Å—Ç–æ–∏—Ç –ø—Ä–æ—è–≤–ª—è—Ç—å –∞–≥—Ä–µ—Å—Å–∏—é.

üí† –°—Ç–æ–π–∫–æ—Å—Ç—å. –í—ã —Å–ø–æ—Å–æ–±–Ω—ã —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –ª—é–±—ã–º –¥–∞–≤–ª–µ–Ω–∏–µ–º.
üí† –í–∏—Ç–∞–ª—å–Ω–æ—Å—Ç—å. –•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å –¥–ª—è —Å–ø–æ—Ä—Ç–∞, —Ç–µ–ª–µ—Å–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ —Ä–∞–±–æ—Ç—ã —Å —ç–Ω–µ—Ä–≥–∏–µ–π.
üí† –ö–æ–Ω—Ç—Ä–æ–ª—å. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —ç–º–æ—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ –ø—Ä–∏–Ω—è—Ç–∏–µ, –∞ –Ω–µ —á–µ—Ä–µ–∑ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ.
üí† –°—Ç—Ä–∞—Å—Ç—å. –î–µ–Ω—å —è—Ä–∫–∏—Ö —á—É–≤—Å—Ç–≤ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–≤–æ–µ–π –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

–°–æ–≤–µ—Ç: –ë—É–¥—å—Ç–µ –≥–∏–±–∫–∏–º–∏. –ú—è–≥–∫–∞—è —Å–∏–ª–∞ —Å–µ–≥–æ–¥–Ω—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –ü–æ–Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —Å–≤–æ–∏–º ¬´–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –∑–≤–µ—Ä–µ–º¬ª (–∞–≥—Ä–µ—Å—Å–∏–µ–π –∏–ª–∏ —Å—Ç—Ä–∞—Å—Ç—å—é). –ù–µ –ø–æ–¥–∞–≤–ª—è–π—Ç–µ –µ–≥–æ, –∞ –¥–∞–π—Ç–µ –µ–º—É –º–µ—Å—Ç–æ. –°–ø—Ä–æ—Å–∏—Ç–µ —Å–µ–±—è: ¬´–û —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç –º–Ω–µ —ç—Ç–∞ —ç–º–æ—Ü–∏—è?¬ª –ù–∞–ø—Ä–∞–≤—å—Ç–µ —ç—Ç—É —ç–Ω–µ—Ä–≥–∏—é –≤ —Å–æ–∑–∏–¥–∞–Ω–∏–µ –∏–ª–∏ —Å–ø–æ—Ä—Ç.` },
      { id: 3, name: "XXI –ú–ò–†", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/world.jpg",
        long:
`–î–µ–Ω—å –≥–∞—Ä–º–æ–Ω–∏–∏, —Ç—Ä–∏—É–º—Ñ–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü. –ö—Ä—É–≥ –∑–∞–º–∫–Ω—É–ª—Å—è: –≤—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –∫ –≤–∞–∂–Ω–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∏ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –µ–¥–∏–Ω—Å—Ç–≤–æ —Å –º–∏—Ä–æ–º.

üí† –£—Å–ø–µ—Ö. –ë–ª–∞–≥–æ–ø–æ–ª—É—á–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞.
üí† –ú–∞—Å—à—Ç–∞–±. –û—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–æ–µ–∑–¥–æ–∫, —Ä–∞–±–æ—Ç—ã –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏–ª–∏ –æ–±—â–µ–Ω–∏—è —Å –∏–Ω–æ—Å—Ç—Ä–∞–Ω—Ü–∞–º–∏.
üí† –°–≤–æ–±–æ–¥–∞. –ò–∑–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ –æ–±—Ä–µ—Ç–µ–Ω–∏–µ –ø–æ–∫–æ—è.
üí† –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å. –°–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–≥–¥–∞ –≤—Å—ë –Ω–∞ —Å–≤–æ–∏—Ö –º–µ—Å—Ç–∞—Ö.

–°–æ–≤–µ—Ç: –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –º–æ–º–µ–Ω—Ç–æ–º ¬´–∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å¬ª. –í—ã —Ç–∞–º, –≥–¥–µ –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –ü—Ä–∞–∫—Ç–∏–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü. –ü–æ–∑–≤–æ–ª—å—Ç–µ —Å–µ–±–µ –≤—ã–π—Ç–∏ –∑–∞ —Ä–∞–º–∫–∏ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è. –û—â—É—Ç–∏—Ç–µ —Å–≤–æ—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å: –≤—ã –Ω–µ —Ç–æ–ª—å–∫–æ –≤–∞—à–∏ –æ—à–∏–±–∫–∏ –∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –≤—ã ‚Äî —Ü–µ–ª–∞—è –í—Å–µ–ª–µ–Ω–Ω–∞—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –º–µ—Å—Ç–æ –≤—Å–µ–º—É.` },
      { id: 4, name: "8 –ö–£–ë–ö–û–í", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/8cups.jpg",
        long:
`–î–µ–Ω—å –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —É—Ö–æ–¥–∞ –∏ –ø–æ–∏—Å–∫–∞ –Ω–æ–≤—ã—Ö —Å–º—ã—Å–ª–æ–≤. –°—Ç–∞—Ä–æ–µ –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–¥—É–µ—Ç, –∏ –≤—ã —Ä–µ—à–∞–µ—Ç–µ—Å—å –æ—Å—Ç–∞–≤–∏—Ç—å ¬´–ø–æ–ª–Ω—ã–µ —á–∞—à–∏¬ª —Ä–∞–¥–∏ —á–µ–≥–æ-—Ç–æ –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ.

üí† –ü—É—Ç—å. –í—Ä–µ–º—è –ø–µ—Ä–µ–º–µ–Ω –∏ –¥–≤–∏–∂–µ–Ω–∏—è –∫ –Ω–æ–≤—ã–º –±–µ—Ä–µ–≥–∞–º.
üí† –ü—Ä–æ—â–∞–Ω–∏–µ. –°–ø–æ–∫–æ–π–Ω–æ–µ —Ä–∞—Å—Å—Ç–∞–≤–∞–Ω–∏–µ —Å —Ç–µ–º, —á—Ç–æ –∏–∑–∂–∏–ª–æ —Å–µ–±—è.
üí† –î—É—Ö–æ–≤–Ω–æ—Å—Ç—å. –ü–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è, –∞ –Ω–µ –≤–æ –≤–Ω–µ—à–Ω–∏—Ö –±–ª–∞–≥–∞—Ö.
üí† –ü–µ—Ä–µ—Ö–æ–¥. –°–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–º–µ–∂–¥—É –ø—Ä–æ—à–ª—ã–º –∏ –±—É–¥—É—â–∏–º¬ª.

–°–æ–≤–µ—Ç: –ù–µ –±–æ–π—Ç–µ—Å—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–∏–≤—ã—á–Ω–æ–µ. –í–ø–µ—Ä–µ–¥–∏ –≤–∞—à –∏—Å—Ç–∏–Ω–Ω—ã–π –ø—É—Ç—å.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ, —á—Ç–æ –≤—ã –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç–µ –¥–µ–ª–∞—Ç—å ¬´–ø–æ –ø—Ä–∏–≤—ã—á–∫–µ¬ª, —Ö–æ—Ç—è —ç—Ç–æ –¥–∞–≤–Ω–æ –Ω–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç–∏. –ü—Ä–∏–∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω –≤–æ–≤—Å–µ —ç—Ç–æ –Ω–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ, —ç—Ç–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ ¬´–Ø¬ª.` },
      { id: 5, name: "10 –ö–£–ë–ö–û–í", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/10cups.jpg",
        long:
`–î–µ–Ω—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–∑–æ–±–∏–ª–∏—è –∏ —Å–µ–º–µ–π–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è. –ö–∞—Ä—Ç–∞ –≥–∞—Ä–º–æ–Ω–∏–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∏ –æ—â—É—â–µ–Ω–∏—è, —á—Ç–æ ¬´–∂–∏–∑–Ω—å —É–¥–∞–ª–∞—Å—å¬ª.

üí† –°–µ–º—å—è. –í—Ä–µ–º—è –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –±–ª–∏–∑–∫–∏–º–∏, —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π –∏ –¥–æ–º–∞—à–Ω–µ–≥–æ —É—é—Ç–∞.
üí† –†–∞–¥–æ—Å—Ç—å. –ò—Å–∫—Ä–µ–Ω–Ω–µ–µ —Å—á–∞—Å—Ç—å–µ –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –≤–µ—â–µ–π.
üí† –ï–¥–∏–Ω—Å—Ç–≤–æ. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–æ–¥–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
üí† –§–∏–Ω–∞–ª. –°—á–∞—Å—Ç–ª–∏–≤–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–∞–≤–Ω–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏.

–°–æ–≤–µ—Ç: –ë–µ—Ä–µ–≥–∏—Ç–µ —Å–≤–æ–µ —Å—á–∞—Å—Ç—å–µ –∏ –¥–µ–ª–∏—Ç–µ—Å—å —Ç–µ–ø–ª–æ–º —Å —Ç–µ–º–∏, –∫—Ç–æ –≤–∞–º –¥–æ—Ä–æ–≥.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –ü—Ä–∞–∫—Ç–∏–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏. –ü—Å–∏—Ö–∏–∫–µ –≤–∞–∂–Ω–æ –∑–∞–º–µ—á–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏ —Ç–µ–ø–ª—ã–µ –∑–æ–Ω—ã. –ù–∞–π–¥–∏—Ç–µ 3 –ø–æ–≤–æ–¥–∞ —Å–∫–∞–∑–∞—Ç—å ¬´—Å–ø–∞—Å–∏–±–æ¬ª –±–ª–∏–∑–∫–∏–º –∏–ª–∏ —Å–∞–º–æ–π –∂–∏–∑–Ω–∏. –≠—Ç–æ —É–∫—Ä–µ–ø–∏—Ç –≤–∞—à—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –æ–ø–æ—Ä—É.` },
      { id: 6, name: "–¢–£–ó –ü–ï–ù–¢–ê–ö–õ–ï–ô", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/ace_pentacles.jpg",
        long:
`–î–µ–Ω—å –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ —É–¥–∞—á–Ω—ã—Ö —à–∞–Ω—Å–æ–≤. –ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∞—Ä –≤ –≤–∏–¥–µ —Ä–µ—Å—É—Ä—Å–∞, –¥–µ–Ω–µ–≥ –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è.

üí† –ü—Ä–∏–±—ã–ª—å. –®–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Ö–æ–¥, –ø—Ä–µ–º–∏—é –∏–ª–∏ —Ü–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫.
üí† –ó–¥–æ—Ä–æ–≤—å–µ. –û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –∑–∞–±–æ—Ç—ã –æ —Ç–µ–ª–µ.
üí† –°—Ç–∞—Ä—Ç. –ó–∞–∫–ª–∞–¥–∫–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
üí† –†–µ–∞–ª—å–Ω–æ—Å—Ç—å. –û—â—É—Ç–∏–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞—à–∏—Ö —Ç—Ä—É–¥–æ–≤.

–°–æ–≤–µ—Ç: –õ–æ–≤–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å. –°–µ–≥–æ–¥–Ω—è –º–∏—Ä –ø—Ä–æ—Ç—è–≥–∏–≤–∞–µ—Ç –≤–∞–º ¬´–∑–æ–ª–æ—Ç—É—é –º–æ–Ω–µ—Ç—É¬ª.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –†–∞–∑—Ä–µ—à–∏—Ç–µ —Å–µ–±–µ –æ–±–ª–∞–¥–∞—Ç—å –∂–µ–ª–∞–µ–º—ã–º. –ß–∞—Å—Ç–æ –º—ã –±–µ—Å—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–µ–º —É–¥–∞—á—É, —Å—á–∏—Ç–∞—è, —á—Ç–æ ¬´–Ω–µ –∑–∞—Å–ª—É–∂–∏–ª–∏¬ª. –°–∫–∞–∂–∏—Ç–µ —Å–µ–≥–æ–¥–Ω—è: ¬´–Ø –ø—Ä–∏–Ω–∏–º–∞—é —ç—Ç–æ—Ç —Ä–µ—Å—É—Ä—Å, –æ–Ω –º–æ–π –ø–æ –ø—Ä–∞–≤—É¬ª.` },
      { id: 7, name: "3 –ü–ï–ù–¢–ê–ö–õ–ï–ô", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/3pentacles.jpg",
        long:
`–î–µ–Ω—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–∞ –∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –ø—Ä–∏–∑–Ω–∞–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø–ª–æ–¥—ã.

üí† –†–æ—Å—Ç. –ü–æ–≤—ã—à–µ–Ω–∏–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ –≤–∞—à–∏—Ö –Ω–∞–≤—ã–∫–æ–≤.
üí† –°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ. –†–∞–±–æ—Ç–∞ –≤ —Å–≤—è–∑–∫–µ —Å —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏ –¥–∞–µ—Ç –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
üí† –î–µ—Ç–∞–ª–∏. –í–Ω–∏–º–∞–Ω–∏–µ –∫ –º–µ–ª–æ—á–∞–º —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à –ø—Ä–æ–µ–∫—Ç –±–µ–∑—É–ø—Ä–µ—á–Ω—ã–º.
üí† –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤. –ü–ª–∞–Ω–æ–º–µ—Ä–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏ —á–µ—Ä–µ–∑ —Ç—Ä—É–¥.

–°–æ–≤–µ—Ç: –ü—Ä–æ—è–≤–∏—Ç–µ —Å–µ–±—è –∫–∞–∫ —ç–∫—Å–ø–µ—Ä—Ç. –í–∞—à–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è –±—É–¥—É—Ç –∑–∞–º–µ—á–µ–Ω—ã –∏ –æ—Ü–µ–Ω–µ–Ω—ã.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –†–∞–±–æ—Ç–∞ —Å —Å–∞–º–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å—é. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–≤–æ–µ–≥–æ —Ç—Ä—É–¥–∞ –≥–ª–∞–∑–∞–º–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è. –ù–µ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –≤–∫–ª–∞–¥.` },
      { id: 8, name: "–¢–£–ó –ú–ï–ß–ï–ô", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/ace_swords.jpg",
        long:
`–î–µ–Ω—å —è—Å–Ω–æ—Å—Ç–∏, –ª–æ–≥–∏–∫–∏ –∏ –≤–æ–ª–µ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π. –¢—É–º–∞–Ω —Ä–∞—Å—Å–µ–∏–≤–∞–µ—Ç—Å—è, –∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é —Ç–∞–∫–æ–π, –∫–∞–∫–∞—è –æ–Ω–∞ –µ—Å—Ç—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ.

üí† –ò–Ω—Å–∞–π—Ç. –ú–æ–º–µ–Ω—Ç ¬´–≠–≤—Ä–∏–∫–∞!¬ª –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã.
üí† –ü–æ–±–µ–¥–∞. –ü—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π —Å–∏–ª–æ–π —Ä–∞–∑—É–º–∞.
üí† –ü—Ä—è–º–æ—Ç–∞. –í–∞–∂–Ω—ã–π, —Å–µ—Ä—å–µ–∑–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç –≤—Å–µ —Ç–æ—á–∫–∏ –Ω–∞–¥ i.
üí† –†–∞–¥–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ—Ç—Å–µ—á—å –ª–∏—à–Ω–µ–µ.

–°–æ–≤–µ—Ç: –î–µ–π—Å—Ç–≤—É–π—Ç–µ —Ö–ª–∞–¥–Ω–æ–∫—Ä–æ–≤–Ω–æ. –¢—Ä–µ–∑–≤—ã–π —Ä–∞—Å—á–µ—Ç —Å–µ–≥–æ–¥–Ω—è –≤–∞–∂–Ω–µ–µ —ç–º–æ—Ü–∏–π.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –î–µ–Ω—å –º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –≥–∏–≥–∏–µ–Ω—ã. –û—Ç—Å–µ–∫–∏—Ç–µ –ª–∏—à–Ω–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —à—É–º –∏ —á—É–∂–∏–µ –º–Ω–µ–Ω–∏—è. –°–ø—Ä–æ—Å–∏—Ç–µ —Å–µ–±—è: ¬´–ß—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–∫—Ç—ã, –∞ —á—Ç–æ –º–æ–∏ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –∏ —Å—Ç—Ä–∞—Ö–∏?¬ª –í—ã–±–∏—Ä–∞–π—Ç–µ —è—Å–Ω–æ—Å—Ç—å.` },
      { id: 9, name: "–ü–ê–ñ –ñ–ï–ó–õ–û–í", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/page_wands.jpg",
        long:
`–î–µ–Ω—å –Ω–æ–≤–æ—Å—Ç–µ–π, —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞ –∏ —Å–≤–µ–∂–∏—Ö –∏–¥–µ–π. –ú–æ–ª–æ–¥–∞—è, –¥–µ—Ä–∑–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è, –∂–∞–∂–¥—É—â–∞—è –ø—Ä–æ—è–≤–ª–µ–Ω–Ω–æ—Å—Ç–∏.

üí† –ù–æ–≤–æ—Å—Ç–∏. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
üí† –ò–Ω—Ç–µ—Ä–µ—Å. –û–≥—Ä–æ–º–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ —É—á–∏—Ç—å—Å—è –Ω–æ–≤–æ–º—É –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç.
üí† –ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å. –û—Ç–∫—Ä—ã—Ç–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤ –∏ –∂–µ–ª–∞–Ω–∏–π.
üí† –®–∞–Ω—Å. –ú–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –º–Ω–æ–≥–æ–æ–±–µ—â–∞—é—â–∏–π —Å—Ç–∞—Ä—Ç.

–°–æ–≤–µ—Ç: –ë—É–¥—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º. –î–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç –æ–ø—ã—Ç–∞, –ø—Ä–æ–±—É–π—Ç–µ!
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –í–∫–ª—é—á–∏—Ç–µ ¬´–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞¬ª. –ü–æ–∑–≤–æ–ª—å—Ç–µ —Å–µ–±–µ –±—ã—Ç—å –Ω–µ–∏–¥–µ–∞–ª—å–Ω–æ–π, –æ—à–∏–±–∞—Ç—å—Å—è –∏ –∏—Å–∫—Ä–µ–Ω–Ω–µ —á–µ–º-—Ç–æ —É–≤–ª–µ—á—å—Å—è. –õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ —Å–µ–≥–æ–¥–Ω—è –≤–∞—à –≥–ª–∞–≤–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –∏ –∞–Ω—Ç–∏–¥–æ—Ç –æ—Ç –≤—ã–≥–æ—Ä–∞–Ω–∏—è.` },
      { id: 10, name: "4 –ú–ï–ß–ï–ô", sphere: "–ö–∞—Ä—Ç–∞ –¥–Ω—è", image: "assets/4swords.jpg",
        long:
`–î–µ–Ω—å –ø–∞—É–∑—ã, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–æ–∫–æ—è. –í—Ä–µ–º—è ¬´–ª–µ—á—å –Ω–∞ –¥–Ω–æ¬ª, —á—Ç–æ–±—ã –Ω–∞–±—Ä–∞—Ç—å—Å—è —Å–∏–ª –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º —Ä—ã–≤–∫–æ–º.

üí† –û—Ç–¥—ã—Ö. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è –∏ –≤—ã–¥–æ—Ö–Ω—É—Ç—å.
üí† –ú–µ–¥–∏—Ç–∞—Ü–∏—è. –£—Ö–æ–¥ –≤ —Ç–∏—à–∏–Ω—É –¥–ª—è –º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.
üí† –°—Ç–∞—Ç–∏–∫–∞. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π –∏ —ç—Ç–æ —Å–µ–π—á–∞—Å –≤–æ –±–ª–∞–≥–æ.
üí† –û–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏–µ. –¢–µ–ª–æ –ø—Ä–æ—Å–∏—Ç —Å–Ω–∞ –∏ —Ç–∏—à–∏–Ω—ã.

–°–æ–≤–µ—Ç: –î–∞–π—Ç–µ —Å–µ–±–µ –ø—Ä–∞–≤–æ –Ω–∞ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ. –ú–∏—Ä –Ω–µ —Ä—É—Ö–Ω–µ—Ç, –ø–æ–∫–∞ –≤—ã –æ—Ç–¥—ã—Ö–∞–µ—Ç–µ.
–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–∫—É—Å: –ü—Ä–∞–∫—Ç–∏–∫–∞ —Ç–∏—à–∏–Ω—ã. –ü–æ–±—É–¥—å—Ç–µ —Ö–æ—Ç—è –±—ã 15 –º–∏–Ω—É—Ç –±–µ–∑ –≥–∞–¥–∂–µ—Ç–æ–≤ –∏ –∑–∞–¥–∞—á. –í–∞—à–∞ –ø—Å–∏—Ö–∏–∫–∞ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–π –ø–∞—É–∑–µ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–∞—Ä–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –æ–ø—ã—Ç.` }
    ];

    // ====== STATE / HELPERS ======
    const state = {
      locked:false,
      picked:null,
      cardNodes:[],
      count:10,
      isExpanded:false,
      targets:[]
    };
    const $ = (id) => document.getElementById(id);

    function showScreen(which){
      ["screenWheel","screenPicked","screenText"].forEach(id => {
        $(id).classList.toggle("active", id === which);
      });
    }

    function randomPick(){
      return TAROT[Math.floor(Math.random() * TAROT.length)];
    }

    function setPickedUI(card){
      $("pillSphere").textContent = `–°–§–ï–†–ê: –ö–ê–†–¢–ê –î–ù–Ø`;
      $("pillName").textContent = card.name;

      $("textSphere").textContent = `–ö–ê–†–¢–ê –î–ù–Ø`;
      $("textName").textContent = card.name;
      $("textPanel").textContent = card.long;

      const flip = $("pickedFlip");
      const back = $("pickedBack");
      const frontImg = $("pickedFrontImg");

      flip.classList.remove("revealed");
      back.style.backgroundImage = `url('${BACK_IMAGE}')`;
      frontImg.src = card.image;
      frontImg.onerror = () => frontImg.removeAttribute("src");

      setTimeout(() => flip.classList.add("revealed"), 260);
    }

    // ====== GEOMETRY (circle positions) ======
    function computeTargets(size){
      const cardW = (window.innerWidth <= 360) ? 86 : 92;
      const cardH = (window.innerWidth <= 360) ? 134 : 142;

      const center = size / 2;
      const startAngle = -90;

      const desiredArc = cardW * 0.95;
      let radius = (desiredArc * state.count) / (2 * Math.PI);

      const minR = size * 0.28;
      const maxR = size * 0.44;
      radius = Math.max(minR, Math.min(maxR, radius));

      const targets = [];
      for(let i=0;i<state.count;i++){
        const angle = startAngle + (360 / state.count) * i;
        const rad = angle * Math.PI/180;

        const x = center + radius * Math.cos(rad) - cardW/2;
        const y = center + radius * Math.sin(rad) - cardH/2;

        targets.push({ x, y, rot: angle + 90 });
      }
      return targets;
    }

    function makeWheel(){
      const wheel = $("wheel");
      wheel.innerHTML = "";
      state.cardNodes = [];

      const rect = wheel.getBoundingClientRect();
      const size = Math.min(rect.width || 320, rect.height || 320);
      state.targets = computeTargets(size);

      const cardW = (window.innerWidth <= 360) ? 86 : 92;
      const cardH = (window.innerWidth <= 360) ? 134 : 142;

      const stackLeft = (size/2) - (cardW/2);
      const stackTop  = (size/2) - (cardH/2) + 6;

      for(let i=0;i<state.count;i++){
        const el = document.createElement("div");
        el.className = "tarotCard";

        el.style.left = `${state.targets[i].x}px`;
        el.style.top  = `${state.targets[i].y}px`;

        const dx = stackLeft - state.targets[i].x;
        const dy = stackTop  - state.targets[i].y;

        const stackRot = (Math.random()*10 - 5).toFixed(2);
        el.style.transform = `translate(${dx}px, ${dy}px) rotate(${stackRot}deg) scale(.98)`;
        el.style.opacity = "1";

        const face = document.createElement("div");
        face.className = "cardFace";
        face.style.backgroundImage = `url('${BACK_IMAGE}')`;

        el.appendChild(face);
        el.addEventListener("click", () => onCardClick(el));
        wheel.appendChild(el);
        state.cardNodes.push(el);
      }

      state.isExpanded = false;
    }

    function animateStackToCircle(){
      if(state.isExpanded) return Promise.resolve();
      const ease = "cubic-bezier(.2,.8,.2,1)";
      const dur = 1300;

      const anims = state.cardNodes.map((el, i) => {
        const targetRot = state.targets[i]?.rot ?? 0;
        const end = `translate(0px, 0px) rotate(${targetRot}deg) scale(1)`;

        return el.animate(
          [
            { transform: el.style.transform, offset: 0 },
            { transform: end, offset: 1 }
          ],
          { duration: dur, easing: ease, fill: "forwards" }
        ).finished.then(() => { el.style.transform = end; });
      });

      state.isExpanded = true;
      return Promise.all(anims);
    }

    function animateCircleToStack(clickedEl){
      const wheel = $("wheel");
      const rect = wheel.getBoundingClientRect();
      const size = Math.min(rect.width || 320, rect.height || 320);

      const cardW = (window.innerWidth <= 360) ? 86 : 92;
      const cardH = (window.innerWidth <= 360) ? 134 : 142;

      const stackLeft = (size/2) - (cardW/2);
      const stackTop  = (size/2) - (cardH/2) + 6;

      const ease = "cubic-bezier(.2,.8,.2,1)";
      const dur = 1100;

      const anims = state.cardNodes.map((el, i) => {
        const isClicked = (el === clickedEl);

        const dx = stackLeft - state.targets[i].x;
        const dy = stackTop  - state.targets[i].y;

        el.style.zIndex = isClicked ? 3 : 1;

        const endRot = isClicked ? 0 : (Math.random()*10 - 5);
        const endOpacity = isClicked ? "1" : ".55";
        const end = `translate(${dx}px, ${dy}px) rotate(${endRot.toFixed(2)}deg) scale(.98)`;

        return el.animate(
          [
            { transform: el.style.transform || "translate(0px,0px)", opacity: "1", offset: 0 },
            { transform: end, opacity: endOpacity, offset: 1 }
          ],
          { duration: dur, easing: ease, fill: "forwards" }
        ).finished.then(() => {
          el.style.transform = end;
          el.style.opacity = endOpacity;
        });
      });

      state.isExpanded = false;
      return Promise.all(anims);
    }

    // ====== 1 –†–ê–°–ö–õ–ê–î –í –î–ï–ù–¨ ======
    function getUserId(){
      try{
        return window.Telegram?.WebApp?.initDataUnsafe?.user?.id || "anon";
      }catch(e){
        return "anon";
      }
    }

    function todayKey(){
      return new Date().toLocaleDateString("ru-RU", { timeZone: TIMEZONE });
    }

    function dailyKey(){
      return `tarot_day_${getUserId()}`;
    }

    function canDrawToday(){
      const last = localStorage.getItem(dailyKey());
      return last !== todayKey();
    }

    function setDrawToday(){
      localStorage.setItem(dailyKey(), todayKey());
    }

    function showGateOrLimit(textTitle, textBody){
      showScreen("screenText");
      $("textSphere").textContent = "–ö–ê–†–¢–ê –î–ù–Ø";
      $("textName").textContent = textTitle;
      $("textPanel").textContent = textBody;
      $("btnSend").style.display = "none";
      $("btnFull").textContent = "–•–æ—á—É –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥!";
      $("textPanel").scrollTop = 0;
    }

    function isFromBot(){
      const u = new URL(window.location.href);
      return u.searchParams.get("from") === "bot";
    }

    async function onCardClick(clickedEl){
      if(REQUIRE_FROM_BOT_PARAM && !isFromBot()){
        showGateOrLimit(
          "–î–æ—Å—Ç—É–ø –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏",
          "–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å ¬´–ö–∞—Ä—Ç—É –¥–Ω—è¬ª, –≤–µ—Ä–Ω–∏—Å—å –≤ –±–æ—Ç –∏ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª."
        );
        return;
      }

      if(!canDrawToday()){
        showGateOrLimit(
          "–¢—ã —É–∂–µ –ø–æ–ª—É—á–∞–ª–∞ –∫–∞—Ä—Ç—É —Å–µ–≥–æ–¥–Ω—è ‚ú®",
          "–ù–æ–≤—ã–π —Ä–∞—Å–∫–ª–∞–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∑–∞–≤—Ç—Ä–∞.\n\n–ê –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –≥–ª—É–±–∂–µ ‚Äî –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥."
        );
        return;
      }

      if(state.locked) return;

      if(!state.isExpanded){
        state.locked = true;
        await animateStackToCircle();
        state.locked = false;
        return;
      }

      state.locked = true;
      state.picked = randomPick();
      setDrawToday();

      await animateCircleToStack(clickedEl);

      state.cardNodes.forEach(el => {
        if(el !== clickedEl) el.classList.add("pickedOut");
      });

      setTimeout(() => {
        showScreen("screenPicked");
        setPickedUI(state.picked);
        state.locked = false;
      }, 180);
    }

    // ====== –û–¢–ü–†–ê–í–ö–ê –í –ë–û–¢ ======
    function sendToChat(){
      if(!state.picked) return;

      const payload = {
        type: "card_day",
        card: state.picked.name,
        sphere: state.picked.sphere,
        text: state.picked.long,
        date: todayKey()
      };

      const dataStr = JSON.stringify(payload);

      if(window.Telegram && window.Telegram.WebApp && typeof window.Telegram.WebApp.sendData === "function"){
        window.Telegram.WebApp.sendData(dataStr);
        try{ window.Telegram.WebApp.close(); }catch(e){}
        return;
      }

      navigator.clipboard?.writeText(state.picked.long)
        .then(() => alert("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω. –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —á–∞—Ç üôÇ"))
        .catch(() => alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å."));
    }

    // ====== MODAL LOGIC: "–ü–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥" ======
    const PAY_URL = "https://payform.ru/rlaHraE/";

    function openFullModal(){
      const modal = $("fullReadingModal");
      modal.classList.add("isOpen");
      modal.setAttribute("aria-hidden", "false");
    }

    function closeFullModal(){
      const modal = $("fullReadingModal");
      modal.classList.remove("isOpen");
      modal.setAttribute("aria-hidden", "true");
    }

    function openPayLink(){
      try{
        if(window.Telegram && window.Telegram.WebApp && typeof window.Telegram.WebApp.openLink === "function"){
          window.Telegram.WebApp.openLink(PAY_URL);
          return;
        }
      }catch(e){}
      window.open(PAY_URL, "_blank", "noopener,noreferrer");
    }

    // ====== FULLSCREEN / EXPAND ======
    function tryExpandFullscreen(){
      try{
        if(window.Telegram && window.Telegram.WebApp){
          window.Telegram.WebApp.ready();
          window.Telegram.WebApp.expand();
        }
      }catch(e){}

      try{
        const el = document.documentElement;
        const req = el.requestFullscreen || el.webkitRequestFullscreen || el.msRequestFullscreen;
        if(req) req.call(el);
      }catch(e){}
    }

    // ====== EVENTS ======
    $("btnDecode").addEventListener("click", () => {
      if(!state.picked) return;
      showScreen("screenText");
      $("btnSend").style.display = "";
      $("btnSend").textContent = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç";
      $("btnFull").textContent = "–•–æ—á—É –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥!";
      $("textPanel").scrollTop = 0;
    });

    $("btnSend").addEventListener("click", sendToChat);

    // ‚úÖ —Ç–µ–ø–µ—Ä—å btnFull –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É
    $("btnFull").addEventListener("click", openFullModal);

    // modal close handlers
    $("fullReadingClose").addEventListener("click", closeFullModal);
    $("fullReadingModal").addEventListener("click", (e) => {
      if(e.target && e.target.id === "fullReadingModal") closeFullModal();
    });
    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape"){
        const modal = $("fullReadingModal");
        if(modal.classList.contains("isOpen")) closeFullModal();
      }
    });

    // pay button handler
    $("payBtn").addEventListener("click", openPayLink);

    window.addEventListener("load", async () => {
      tryExpandFullscreen();
      makeWheel();

      await new Promise(r => setTimeout(r, 120));
      await animateStackToCircle();
    });

    window.addEventListener("resize", () => {
      if(state.locked) return;
      makeWheel();
      animateStackToCircle();
    });
  </script>
</body>
</html>
